åœ¨ JavaScript ä¸­ï¼Œéšå¼è½¬æ¢ï¼ˆImplicit Coercionï¼‰ æ˜¯æŒ‡åœ¨ç‰¹å®šæ“ä½œä¸­ï¼Œå¼•æ“Žè‡ªåŠ¨å°†å€¼ä»Žä¸€ç§ç±»åž‹è½¬æ¢ä¸ºå¦ä¸€ç§ç±»åž‹çš„è¿‡ç¨‹ã€‚è¿™ç§è½¬æ¢é€šå¸¸å‘ç”Ÿåœ¨è¿ç®—ç¬¦ã€é€»è¾‘åˆ¤æ–­æˆ–å‡½æ•°å‚æ•°ä¼ é€’ç­‰åœºæ™¯ä¸­ï¼Œå¯èƒ½å¼•å‘æ„å¤–è¡Œä¸ºï¼Œå› æ­¤ç†è§£å…¶è§„åˆ™è‡³å…³é‡è¦ã€‚

ðŸ“Œ ä¸€ã€éšå¼è½¬æ¢çš„ä¸‰å¤§åœºæ™¯
1. ç®—æœ¯è¿ç®—ç¬¦ï¼ˆ+, -, *, /, % ç­‰ï¼‰
+ è¿ç®—ç¬¦ï¼š
å¦‚æžœä»»æ„æ“ä½œæ•°ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™å°è¯•å°†å¦ä¸€ä¸ªæ“ä½œæ•°è½¬ä¸ºå­—ç¬¦ä¸²å¹¶æ‹¼æŽ¥ã€‚
å¦åˆ™ï¼Œå°è¯•å°†æ“ä½œæ•°è½¬ä¸ºæ•°å­—è¿›è¡ŒåŠ æ³•è¿ç®—ã€‚
javascript
console.log(1 + '2');    // '12'ï¼ˆæ•°å­— â†’ å­—ç¬¦ä¸²æ‹¼æŽ¥ï¼‰
console.log(true + 1);   // 2ï¼ˆtrue â†’ 1ï¼‰
console.log(null + 1);   // 1ï¼ˆnull â†’ 0ï¼‰
console.log(undefined + 1); // NaNï¼ˆundefined â†’ NaNï¼‰
å…¶ä»–ç®—æœ¯è¿ç®—ç¬¦ï¼ˆ-, *, /, %ï¼‰ï¼š
æ€»æ˜¯å°è¯•å°†æ“ä½œæ•°è½¬ä¸ºæ•°å­—ã€‚
javascript
console.log('10' - 2);   // 8ï¼ˆå­—ç¬¦ä¸² â†’ æ•°å­—ï¼‰
console.log('abc' * 2);  // NaNï¼ˆæ— æ³•è½¬ä¸ºæ•°å­—ï¼‰
console.log(true - false); // 1ï¼ˆtrueâ†’1, falseâ†’0ï¼‰
2. é€»è¾‘åˆ¤æ–­ï¼ˆif, &&, ||, ! ç­‰ï¼‰
if æ¡ä»¶ï¼š
å°†å€¼è½¬ä¸ºå¸ƒå°”å€¼ï¼ˆToBooleanï¼‰ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š
å€¼ç±»åž‹	è½¬ä¸º false çš„æƒ…å†µ
å‡å€¼ï¼ˆFalsyï¼‰	false, 0, "", null, undefined, NaN
å…¶ä»–	å‡è½¬ä¸º trueï¼ˆåŒ…æ‹¬ [], {}ï¼‰
javascript
if ('') console.log('ä¸ä¼šæ‰§è¡Œ'); // ç©ºå­—ç¬¦ä¸²æ˜¯å‡å€¼
if ([]) console.log('ä¼šæ‰§è¡Œ');   // ç©ºæ•°ç»„æ˜¯çœŸå€¼
é€»è¾‘è¿ç®—ç¬¦ï¼š
&&ï¼šè¿”å›žç¬¬ä¸€ä¸ªå‡å€¼æˆ–æœ€åŽä¸€ä¸ªçœŸå€¼ã€‚
||ï¼šè¿”å›žç¬¬ä¸€ä¸ªçœŸå€¼æˆ–æœ€åŽä¸€ä¸ªå‡å€¼ã€‚
!ï¼šå°†å€¼è½¬ä¸ºå¸ƒå°”å€¼åŽå–åã€‚
javascript
console.log(0 && 'hello'); // 0ï¼ˆç¬¬ä¸€ä¸ªå‡å€¼ï¼‰
console.log('' || 'world'); // 'world'ï¼ˆç¬¬ä¸€ä¸ªçœŸå€¼ï¼‰
console.log(!null);        // trueï¼ˆnullâ†’falseï¼Œå–åï¼‰
3. æ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆ==, !=, >, < ç­‰ï¼‰
å®½æ¾ç›¸ç­‰ï¼ˆ== å’Œ !=ï¼‰ï¼š
å¦‚æžœç±»åž‹ä¸åŒï¼Œå°è¯•éšå¼è½¬æ¢åŽæ¯”è¾ƒã€‚
ç‰¹æ®Šè§„åˆ™ï¼š
null == undefined ä¸º trueï¼ˆä½† null === undefined ä¸º falseï¼‰ã€‚
å­—ç¬¦ä¸²ä¸Žæ•°å­—æ¯”è¾ƒæ—¶ï¼Œå­—ç¬¦ä¸²è½¬ä¸ºæ•°å­—ã€‚
å¯¹è±¡ä¸Žéžå¯¹è±¡æ¯”è¾ƒæ—¶ï¼Œå¯¹è±¡è°ƒç”¨ valueOf()/toString() è½¬ä¸ºåŽŸå§‹å€¼ã€‚
å¸ƒå°”å€¼ä¸Žå…¶ä»–ç±»åž‹æ¯”è¾ƒæ—¶ï¼Œå¸ƒå°”å€¼è½¬ä¸ºæ•°å­—ï¼ˆtrueâ†’1, falseâ†’0ï¼‰ã€‚
javascript
console.log('5' == 5);      // trueï¼ˆå­—ç¬¦ä¸²â†’æ•°å­—ï¼‰
console.log(true == 1);     // trueï¼ˆtrueâ†’1ï¼‰
console.log([] == false);    // trueï¼ˆ[]â†’0, falseâ†’0ï¼‰
console.log({} == '[object Object]'); // falseï¼ˆå¯¹è±¡â†’å­—ç¬¦ä¸²ï¼Œä½†æ¯”è¾ƒå¤±è´¥ï¼‰
ä¸¥æ ¼ç›¸ç­‰ï¼ˆ=== å’Œ !==ï¼‰ï¼š
ä¸è¿›è¡Œéšå¼è½¬æ¢ï¼Œç›´æŽ¥æ¯”è¾ƒç±»åž‹å’Œå€¼ã€‚
javascript
console.log('5' === 5);     // falseï¼ˆç±»åž‹ä¸åŒï¼‰
console.log(null === undefined); // false
å…³ç³»è¿ç®—ç¬¦ï¼ˆ>, < ç­‰ï¼‰ï¼š
å¦‚æžœæ“ä½œæ•°ä¸æ˜¯æ•°å­—æˆ–å­—ç¬¦ä¸²ï¼Œå°è¯•è½¬ä¸ºæ•°å­—ã€‚
å¦‚æžœå‡ä¸ºå­—ç¬¦ä¸²ï¼ŒæŒ‰å­—å…¸åºæ¯”è¾ƒã€‚
javascript
console.log('10' > 2);      // trueï¼ˆå­—ç¬¦ä¸²â†’æ•°å­—ï¼‰
console.log('abc' > 'abd'); // falseï¼ˆå­—å…¸åºæ¯”è¾ƒï¼‰
console.log([1] > [0]);     // trueï¼ˆ[1]â†’'1', [0]â†’'0'ï¼‰
ðŸš¨ äºŒã€éšå¼è½¬æ¢çš„å¸¸è§é™·é˜±
1. == çš„é™·é˜±
javascript
console.log([] == ![]); // true
// è§£æžï¼š
// ![] â†’ falseï¼ˆ[]æ˜¯çœŸå€¼ï¼Œå–ååŽä¸ºfalseï¼‰
// [] == false â†’ []â†’0, falseâ†’0 â†’ 0 == 0 â†’ true
2. å¯¹è±¡ä¸ŽåŽŸå§‹å€¼æ¯”è¾ƒ
javascript
console.log({} == '[object Object]'); // false
// å¯¹è±¡è½¬ä¸ºå­—ç¬¦ä¸²æ˜¯ '[object Object]'ï¼Œä½† == ä¸é€’å½’æ¯”è¾ƒå†…å®¹
3. + çš„å­—ç¬¦ä¸²ä¼˜å…ˆ
javascript
console.log(1 + '2' + 3); // '123'ï¼ˆå…ˆæ‹¼æŽ¥ä¸ºå­—ç¬¦ä¸²ï¼Œå†ç»§ç»­æ‹¼æŽ¥ï¼‰
console.log(1 + 2 + '3'); // '33'ï¼ˆå…ˆè®¡ç®—æ•°å­—ï¼Œå†æ‹¼æŽ¥å­—ç¬¦ä¸²ï¼‰
ðŸ”§ ä¸‰ã€å¦‚ä½•é¿å…éšå¼è½¬æ¢é—®é¢˜ï¼Ÿ
ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰ï¼ˆ=== å’Œ !==ï¼‰ï¼šé¿å… == çš„ç±»åž‹è½¬æ¢ã€‚
æ˜¾å¼è½¬æ¢ç±»åž‹ï¼š
å­—ç¬¦ä¸²è½¬æ•°å­—ï¼šNumber('123') æˆ– parseInt('123', 10)ã€‚
æ•°å­—è½¬å­—ç¬¦ä¸²ï¼šString(123) æˆ– 123.toString()ã€‚
å¸ƒå°”å€¼è½¬æ¢ï¼šBoolean(value)ã€‚
è°¨æ…Žä½¿ç”¨ + è¿ç®—ç¬¦ï¼šæ˜Žç¡®æ“ä½œæ•°ç±»åž‹æˆ–ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²ã€‚
ç†è§£å¯¹è±¡åˆ°åŽŸå§‹å€¼çš„è½¬æ¢ï¼š
å¯¹è±¡ä¼˜å…ˆè°ƒç”¨ valueOf()ï¼Œè‹¥æ— åŽŸå§‹å€¼åˆ™è°ƒç”¨ toString()ã€‚
å¯è‡ªå®šä¹‰ [Symbol.toPrimitive] æ–¹æ³•æŽ§åˆ¶è½¬æ¢è¡Œä¸ºã€‚
ðŸ“ å››ã€æ€»ç»“è¡¨
åœºæ™¯	è½¬æ¢è§„åˆ™
+ å­—ç¬¦ä¸²	ä»»æ„æ“ä½œæ•°ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œè½¬ä¸ºå­—ç¬¦ä¸²æ‹¼æŽ¥ã€‚
ç®—æœ¯è¿ç®—ç¬¦	ä¼˜å…ˆè½¬ä¸ºæ•°å­—ï¼ˆ-, *, /, %ï¼‰ã€‚
if æ¡ä»¶	è½¬ä¸ºå¸ƒå°”å€¼ï¼ˆå‡å€¼ï¼šfalse, 0, "", null, undefined, NaNï¼‰ã€‚
== æ¯”è¾ƒ	æŒ‰å¤æ‚è§„åˆ™è½¬æ¢ï¼ˆä¼˜å…ˆæ•°å­—/å­—ç¬¦ä¸²ï¼Œç‰¹æ®Šå¤„ç† null/undefined/å¸ƒå°”å€¼ï¼‰ã€‚
>/< æ¯”è¾ƒ	è½¬ä¸ºæ•°å­—æˆ–æŒ‰å­—å…¸åºæ¯”è¾ƒå­—ç¬¦ä¸²ã€‚
ç†è§£éšå¼è½¬æ¢çš„æ ¸å¿ƒæ˜¯è®°ä½ â€œå¼•æ“Žå¦‚ä½•å°è¯•å°†ä¸åŒç±»åž‹ç»Ÿä¸€ä¸ºå¯æ“ä½œç±»åž‹â€ã€‚åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œæ˜¾å¼è½¬æ¢ç±»åž‹æˆ–ä½¿ç”¨ä¸¥æ ¼æ¯”è¾ƒèƒ½æ˜¾è‘—å‡å°‘æ„å¤–è¡Œä¸ºã€‚
