PM2 是 Node.js 应用的强大进程管理工具，具备进程守护、负载均衡、零停机重载、日志管理等功能，能有效提升 Node.js 应用在生产环境中的稳定性和性能。以下是关于 PM2 的详细介绍：

一、PM2 的核心功能
进程守护：
PM2 可以确保 Node.js 应用在后台持续运行，即使终端关闭或系统重启，应用也不会停止。
当应用崩溃或退出时，PM2 会自动重启应用，减少停机时间。
负载均衡：
PM2 内置了负载均衡器，可以利用服务器上的所有 CPU 核心，通过创建多个应用实例来分散请求负载。
这有助于提高应用的吞吐量和响应速度，特别适用于高并发场景。
零停机重载：
PM2 支持在应用更新时实现零停机重载，即在不中断服务的情况下重新加载应用。
这对于需要频繁更新的应用来说非常有用，可以确保服务的连续性和稳定性。
日志管理：
PM2 提供了强大的日志管理功能，可以方便地查看和分析应用的日志信息。
支持实时日志流、日志分割、日志压缩等特性，有助于快速定位和解决问题。
监控与报警：
PM2 可以监控应用的 CPU、内存等资源使用情况，并在资源使用超过阈值时触发报警。
这有助于及时发现和解决潜在的性能问题。
二、PM2 的安装与使用
安装：
PM2 可以通过 npm 或 yarn 进行全局安装。安装命令如下：
bash
npm install pm2 -g
# 或
yarn global add pm2
启动应用：
使用 PM2 启动 Node.js 应用非常简单，只需在应用入口文件（如 app.js）前加上 pm2 start 命令即可。例如：
bash
pm2 start app.js
还可以通过参数来配置应用的启动方式，如指定应用名称、实例数量、监听文件变化等。例如：
bash
pm2 start app.js --name "my-app" -i 4 --watch
上述命令中，--name 用于指定应用名称，-i 用于指定实例数量（这里为 4 个），--watch 用于监听文件变化并自动重启应用。
管理应用：
PM2 提供了丰富的命令来管理应用，如停止、重启、删除等。例如：
bash
pm2 stop my-app    # 停止应用
pm2 restart my-app # 重启应用
pm2 delete my-app  # 删除应用
查看应用状态：
使用 pm2 list 命令可以查看当前通过 PM2 运行的所有应用的状态信息。
使用 pm2 monit 命令可以实时监控应用的 CPU、内存等资源使用情况。
三、PM2 的高级特性
配置文件：
PM2 支持通过配置文件来管理应用，这可以提供更丰富的配置选项和更灵活的管理方式。
配置文件可以是 JavaScript、JSON 或 YAML 格式，支持定义多个应用及其配置信息。
开机自启动：
PM2 提供了开机自启动功能，可以确保在服务器重启时自动启动之前运行的应用。
通过 pm2 startup 命令可以生成开机自启动脚本，并按照提示执行即可。
容器支持：
PM2 提供了 pm2-runtime 命令，可以在容器环境中运行 Node.js 应用，并提供与 PM2 相同的进程管理和监控功能。
集成 Keymetrics：
PM2 可以与 Keymetrics 服务集成，提供更强大的监控和报警功能。
Keymetrics 提供了可视化的监控界面和丰富的报警规则设置选项。
